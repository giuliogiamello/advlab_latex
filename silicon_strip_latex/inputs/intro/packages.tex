%-----------------------------------------------------------%
% USEPACKAGE
%-----------------------------------------------------------%

% settings for pdfLaTeX, commented because to draw Feynman
% we need LuaLaTeX compiler  
% set the font for LuaLaTeX compiler 
\usepackage[libertine]{newtxmath}
\usepackage{fontspec}
\usepackage{libertine}
\renewcommand*{\ttdefault}{lmtt}

\usepackage[english]{babel}

% verbatim: to use
% \begin{comment}
%    content...
% \end{comment}
\usepackage{verbatim}

% mhchem: to write nuclear reaction
\usepackage[version=4]{mhchem}

% wrapfig: to write text on the side of a table
\usepackage{wrapfig}

% xcolor: to use colors, I need that in hyperref 
% (this package must be included before 'pdfx')
\usepackage{xcolor}

% pdfx: to compile in pdf/A
\usepackage[a-1b]{pdfx}

% url: to insert links
\usepackage{url}

% fancyhdr: to have line under the chapter name
% at the top of the page, in general to set headers
% and footers
\usepackage{fancyhdr}

% multirow: to create multirow tables
\usepackage{multirow}

% subfig: to insert subfloat images
\usepackage{subfig}

% multicol: to have multicolumn page
\usepackage{multicol}

% mathtools: to insert matrix (etc...)
\usepackage{mathtools}

% float: to insert images in multicolumn page
\usepackage{float}

% physics: to insert physic symbols
% to use \qty to have automatically sized parenthese
\usepackage{physics}

% nameref: to insert 'ref' to not numbered sections or similar,
% e.g. conclusions chapter
\usepackage{nameref}

% cleveref: to insert '\cref' if we want the first letter of the ref
% to be lowercase or '\Cref' if uppercase,
% the option 'noabbrev' avoid abbreviation
% yhe option 'nameinlink' add the name in the link (like: Figure)
\usepackage[noabbrev, nameinlink]{cleveref}

% enumitem: to create numerated itemize
\usepackage{enumitem}

% geometry: by default book is twoside, moves the text a little
% to sx/dx for pages odd/even. With this package
% I avoid that and keep the text centered in all the pages
\usepackage[headheight=15pt,hmarginratio=1:1]{geometry}

% graphicx: to insert images,
% e.g. university logo in title
\usepackage{graphicx}

% titletoc: to create 'toc' (Table Of Contents) only of the appendix of the graphs
\usepackage{titletoc}

% adjustbox: 'export' allows adjustbox keys in \includegraphics
\usepackage[export]{adjustbox}

% csquotes: to write '«' and '»' with \textquote{text}
% and to insert "quote" with \enquote{text} 
\usepackage{csquotes}

% dirtytalk: to insert <<quotations>>
\usepackage[
left = \flqq{},
right = \frqq{},
leftsub = \flq{},
rightsub = \frq{} 
]{dirtytalk}

% amsfonts: to insert special math symbols,
% e.g. the R of Real numbers
\usepackage{amsfonts}

% to draw Feynman diagrams
\usepackage{tikz-feynman, contour}
\tikzfeynmanset{compat=1.1.0}

% booktabs: to insert into tables the commands \toprule, \midrule, \bottomrule
\usepackage{booktabs}

% tocbibind:to insert bibliography in the
% Table of contents
\usepackage{tocbibind}

% listings: to insert code snippets in latex
\usepackage{listings}

% textcomp: to have straight single quotes in lstlistings
\usepackage{textcomp}

% efbox: to have bold perimetral lines in tabular
\usepackage{efbox}

% tabu: to have bold internal lines in tabular
\usepackage{tabu}

% bm: bold math
% load after all math to give access to bold math
\usepackage{bm}

% hyperref: to insert connection and hypertextual links
\usepackage{hyperref}

%-----------------------------------------------------------%
% PACKAGES SETTINGS
%-----------------------------------------------------------%

%%%%%%%%%%%%%%%%%%
%%%% listings %%%%

% color listings settings
\definecolor{codegreen}{rgb}{0,0.5,0}
\definecolor{codegray}{rgb}{0.58,0,0.82}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{1.00,0.80,0.96}

% set the style and font size of listings
\newcommand{\listingsttfamily}{\fontfamily{lmtt}\footnotesize}

% style settings of listings
\lstdefinestyle{prettycode}{%
	basicstyle=\listingsttfamily,
	backgroundcolor=\color{backcolour},
	aboveskip={0.9\baselineskip},
	keepspaces=true,
	commentstyle=\color{codegreen},
	keywordstyle=\color{codepurple},
	numberstyle=\footnotesize\color{codegray},
	stringstyle=\color{black}, % codepurple
	breakatwhitespace=false,
	breaklines=true,
	captionpos=b,
	numbers=left,
	numbersep=5pt,
	xleftmargin=0.2cm,
	xrightmargin=0.2cm,
	showspaces=false,
	showstringspaces=false,
	showtabs=false,
	frame=single,
	tabsize=1}

\lstset{%
	style=prettycode,
	language=Python,
	upquote=true,
	literate={-}{-}1
		 {à}{{\`a}}1
		 {ù}{{\`u}}1
		 {ì}{{\`i}}1
		 {è}{{\`e}}1
	}
% literate={-}{-}1 to have the symbol (minus -) shorter

%%%%%%%%%%%%%%%%%%
%%%% fancyhdr %%%%

% fancyhdr settings
\fancypagestyle{myfancy}{%
	\fancyhf{} % clear existing header/footer entries
	\fancyhead[ER]{\nouppercase\leftmark}
	\fancyhead[OL]{\nouppercase\rightmark}
	\fancyhead[EL,OR]{\thepage}
}

%%%%%%%%%%%%%%%%%
%%%%% efbox %%%%%

% efbox settings
\efboxsetup{linecolor=black, linewidth=1pt, margin=0pt}

%%%%%%%%%%%%%%%%
%%%%% tabu %%%%%

% tabu settings
\setlength{\tabcolsep}{20pt}

%%%%%%%%%%%%%%%%%%
%%%% hyperref %%%%

% hyperref settings
\hypersetup{%
	colorlinks=true,
	linkcolor=blue, % black
	filecolor=magenta,
	urlcolor=codepurple, % \href{https://www.overleaf.com}{Something Linky} oppure \url{https://www.overleaf.com}
	citecolor=black,
	%pdftitle={Overleaf Example}, % to change the name of the document when it is opened, this name is that little one on the top left corner that one can read in his pdf viewer (e.g. Okular).
	% ACHTUNG! When you know the title of this file, insert that as 'pdftitle' with your surname
	%allcolors=black % use this if you want to set all links to the same color
}
\urlstyle{same} % set same style for text and links
\hypersetup{final} % to use draft mode

%%%%%%%%%%%%%%%%%%%
%%%% tocbibind %%%%

% is for making sure that when you view the Table of contents in a pdf viewer (e.g. Okular) there is also a reference to the index, while the reference to the index does not appear in the index of the document itself.

% tocbibind settings
\AtBeginDocument{%
	\let\latextableofcontents\tableofcontents
	
	\renewcommand{\tableofcontents}{
		\addtocontents{toc}{\protect\setcounter{tocdepth}{-2}}
		\latextableofcontents
		\addtocontents{toc}{\protect\setcounter{tocdepth}{3}}
	}
}

%%%%%%%%%%%%%%%%%%%
%%%% fcolorbox %%%%

% padding thickness
\fboxsep=5mm

%border thickness
\fboxrule=1.2pt

%-----------------------------------------------------------%
% COMMANDS DECLARATION
%-----------------------------------------------------------%

% to change the name of the Table of contents from Contents to Index
\renewcommand{\contentsname}{Index}

% command to create an empty page and not get in conflict with hyperref
\newcommand\blankpage{
	\clearpage
	\begingroup
	\null
	\thispagestyle{empty}
	\addtocounter{page}{+1}
	\hypersetup{pageanchor=false}
	\clearpage
	\endgroup
}

